<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Hugo Thomas Quantum Information, Sorbonne Université" />
  <title>L-systems - IG3D assignment</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
  type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">L-systems - IG3D assignment</h1>
<p class="author">Hugo Thomas<br />
Quantum Information, Sorbonne Université</p>
</header>
<div class="flushleft">
<p><strong></strong></p>
</div>
<div class="multicols">
<p><span>2</span></p>
<h4 id="foreword">Foreword:</h4>
<p>In this short report, I will make a quick review of L-systems,
relying on the book The algorithmic beauty of plants <span
class="citation" data-cites="TheAB"></span>, without talking about the
code implementation. Since I’m not an IMA master student, i.e. I’m not
familiar with computer graphics and the fact that the project has to be
done in a quite short time, I have just explored in depth the first
three chapters of the book, i.e. the first ... pages. Moreover, the
theoretical tools have not changed since the release of the book, it
fully covers the state-of-the-art. I will simply explain part of its
content. Finally, it is not possible to sum up the whole
state-of-the-art in a three-pages review, that is why I have carefully
chosen to explain only the parts that are the most interesting to
me.</p>
<h1 class="unnumbered" id="l-systems">L-Systems</h1>
<p>This section presents the simplest class of L-systems, those which
are deterministic and context-free, called D0L-systems. One could define
L-systems as a formal way of defining developmental processes, that
suits well to organic models, and especially plant-development models.
More formally, an L-system <span class="math inline">\(G\)</span> is
defined as a tuple <span class="math inline">\(\langle V, \omega, P
\rangle\)</span>, where <span class="math inline">\(V\)</span> is the
alphabet of symbols, <span class="math inline">\(\omega \in V^+\)</span>
is the axiom, and <span class="math inline">\(P \subset V \times
V^*\)</span> is the set of production rules, also called rewriting
rules: it takes a character <span class="math inline">\(c \in V\)</span>
and returns a string <span class="math inline">\(s \in V^*\)</span>. The
axiom is the starting character of the L-system, that will fully
determine the iteration process. Let <span
class="math inline">\(s_i\)</span> be the result of the <span
class="math inline">\(i^{th}\)</span> iteration, we define <span
class="math inline">\(s_0 = \omega\)</span>. An iteration consists of
the transformation <span class="math inline">\(s_i \rightarrow
s_{i+1}\)</span> defined by the successive transformations of the
characters of <span class="math inline">\(s_i\)</span> according to the
production set <span class="math inline">\(P\)</span>.<br />
For the sake of simplicity, if <span class="math inline">\(x\)</span>
and <span class="math inline">\(y\)</span> are two string in <span
class="math inline">\(V^*\)</span>, then <span
class="math inline">\(xy\)</span> is the concatenation of <span
class="math inline">\(x\)</span> and <span
class="math inline">\(y\)</span>.</p>
<h4 class="unnumbered" id="example">Example:</h4>
<p>Let <span class="math inline">\(G_1 = \langle V, \omega, P
\rangle\)</span>, where <span class="math inline">\(V = \{A,B\}; \omega
= A; P =
\{A\rightarrow AB, B\rightarrow BA\}\)</span>. Then the iterations go as
follows:</p>
<p><span class="math display">\[\begin{aligned}
        s_0 &amp;= \omega = A \\
        s_1 &amp;= P(A) = AB \\
        s_2 &amp;= P(A)P(B) \\
            &amp;= ABBA \\
        s_3 &amp;= P(A)P(B)P(B)P(A)\\
            &amp;= ABBABAAB
    \end{aligned}\]</span></p>
<p>It almost fully describes an L-system, we now need to interpret the
result of an iteration.</p>
<h1 class="unnumbered" id="turtle">Turtle</h1>
<p>Turtle graphics, firstly defined by the Logo programming language
<span class="citation" data-cites="Logo"></span> is a descriptive way of
defining computer drawings. We can hence consider an interpretation of
some characters (not necessarily all of them) of the alphabet. This will
make the turtle move on the screen, and hence draw. For example, <span
class="math inline">\(F\)</span> moves forward a step <span
class="math inline">\(l\)</span>, <span class="math inline">\(+\)</span>
turns clockwise the turtle of an angle <span
class="math inline">\(\delta\)</span>, and <span
class="math inline">\(-\)</span> turns counterclockwise the turtle of an
angle <span class="math inline">\(\delta\)</span>.</p>
<h4 id="example-1">Example:</h4>
<p>If we let <span class="math inline">\(l=1, \delta = 90\)</span>, and
consider the sentence <span
class="math inline">\(FFF+FF+F+F-F-FF+FFF\)</span>, then the turtle
graphics formalism yields the following, starting in <span
class="math inline">\((0,0)\)</span>:</p>
<p>By combining the L-System formalism and the turtle graphics, one can
easily generate fractal like patterns, thanks to the recursive structure
of L-systems. (<span class="math inline">\(n\)</span> is the number of
iterations)</p>
<p><img src="img/triangle.png" alt="image" /> <span id="fig:triangle"
label="fig:triangle"></span></p>
<p>Fig. <a href="#fig:triangle" data-reference-type="ref"
data-reference="fig:triangle">[fig:triangle]</a> shows a fractal-like
model where each pattern repeats itself, this comes from the recursive
manner of defining an iteration.</p>
<h1 class="unnumbered" id="more-realistic-l-systems">More realistic
L-systems</h1>
<p>This definition of L-systems yields interesting and fractal-like
results, but we need to add a branching possibility in order to obtain
plant-like results. This is achieved by considering a stack of turtle
<em>states</em> and its associated operations: <span
class="math inline">\(\texttt{Push}\)</span> and <span
class="math inline">\(\texttt{Pop}\)</span>. Those two operations are
usually represented by the characters <span
class="math inline">\([\)</span> and <span
class="math inline">\(]\)</span> respectively. This enhancement yield
results shown in Fig. <a href="#fig:fuzzy" data-reference-type="ref"
data-reference="fig:fuzzy">[fig:fuzzy]</a> and <a href="#fig:aglae"
data-reference-type="ref"
data-reference="fig:aglae">[fig:aglae]</a>.</p>
<p><img src="img/fuzzy.png" alt="image" /> <span id="fig:fuzzy"
label="fig:fuzzy"></span></p>
<p>The plant-like pattern appears directly, however, we will explore
some enhancement techniques in order to make those more realistic. The
issue that one faces with this kind of <em>very simple</em> L-system, is
that the plant generated by a L-system is unique, and the artificial
regularity is striking. To solve this problem, it is possible to
randomize the turtle parameters, the L-system or both.</p>
<p>Randomizing only the turtle parameters has the effect of letting the
underlying structure of the results unchanged, while randomizing the
L-system itself probabilistically changes the structure, which has the
effect of making the result more realistic. Combining the two options is
in the end the preferable solution. Such a result is shown in Fig. <a
href="#fig:randomized" data-reference-type="ref"
data-reference="fig:randomized">[fig:randomized]</a>.</p>
<p><img src="img/aglae.png" alt="image" /> <span id="fig:aglae"
label="fig:aglae"></span></p>
<p>The list of species being described by L-systems grammar is vastly
increasing. Models have been made: cucumber growth <span
class="citation" data-cites="cucumber"></span>, sunflower <span
class="citation" data-cites="TheAB"></span> (see Fig. <a
href="#fig:sunflower" data-reference-type="ref"
data-reference="fig:sunflower">[fig:sunflower]</a>), barley <span
class="citation" data-cites="barley"></span>, sorghum <span
class="citation" data-cites="sorghum"></span>.</p>
<p><img src="img/sunflower.png" alt="image" /> <span id="fig:sunflower"
label="fig:sunflower"></span></p>
<p><img src="img/r-tree-1.png" alt="image" /></p>
<p><img src="img/r-tree-2.png" alt="image" /></p>
<p><img src="img/r-tree-3.png" alt="image" /></p>
<p><span id="fig:randomized" label="fig:randomized"></span></p>
<h1 class="unnumbered"
id="developmental-models-of-herbaceous-plants">Developmental models of
herbaceous plants</h1>
<p>In the case of self-similar structures, like trees illustrated in
Fig. <a href="#fig:fuzzy" data-reference-type="ref"
data-reference="fig:fuzzy">[fig:fuzzy]</a> <a href="#fig:aglae"
data-reference-type="ref" data-reference="fig:aglae">[fig:aglae]</a> <a
href="#fig:randomized" data-reference-type="ref"
data-reference="fig:randomized">[fig:randomized]</a>, the synthesis
methods based on rewriting rules, are fairly expressive and randomizing
strategies fix the problem of unnatural regularity. However, a more
general approach is needed to model the large variety of developmental
patterns and structures found in nature, especially, it is not possible
to obtain Fig. <a href="#fig:sunflower" data-reference-type="ref"
data-reference="fig:sunflower">[fig:sunflower]</a> only with 0L-systems.
When one observes nature, one sees that the flower development is,
although repetitive, highly controlled. For instance, in most of the
cases when a flower grows, the stem grows first, and in the end the
flower appears. Partial L-systems offer this possibility, especially for
the case of single-flower shoot.</p>
<h3 class="unnumbered" id="partial-l-systems">Partial L-systems</h3>
<p>Partial L-systems can express the vegetative growth of a plant and,
after a certain time, the production of the flower. It’s not in essence
a new kind of L-systems, in the sense that it is completely defined by a
stochastic L-system, but arises from the interpretation of these.
Considering the example given in <span class="citation"
data-cites="TheAB"></span> : <span
class="math display">\[\label{eq:partial}
    \begin{aligned}
        \omega &amp; : a \\
        a \rightarrow &amp;
        \begin{cases}
            I [L] a &amp; \text{w.p. } \alpha\\
            I [L] A &amp; \text{w.p. } \beta
        \end{cases} \\
        A \rightarrow &amp; K
    \end{aligned}\]</span> We of course have to have <span
class="math inline">\(\alpha + \beta = 1\)</span>, <span
class="math inline">\(\alpha, \beta \geq 0\)</span>. The flower stays in
its vegetative phase as long as the rule <span
class="math inline">\(a\rightarrow I[L]a\)</span> is applied, and once
the rule <span class="math inline">\(a\rightarrow I[L]A\)</span> is
selected, the shot stops and the flower appears. It is hence possible to
control the average height of the flower, by controlling the ratio <span
class="math inline">\(\frac{\alpha}{\beta}\)</span>, that can be
interpreted as the average height of the result as shown in Fig. <a
href="#fig:partial" data-reference-type="ref"
data-reference="fig:partial">[fig:partial]</a>. Note that the number of
iterations is an upper-bound, since the rule <span
class="math inline">\(a\rightarrow
I[L]A\)</span> is blocking.</p>
<p><img src="img/f-1.png" alt="image" /></p>
<p><img src="img/f-4.png" alt="image" /></p>
<p><img src="img/f-3.png" alt="image" /></p>
<p><span id="fig:partial" label="fig:partial"></span></p>
<h3 class="unnumbered"
id="context-sensitive-l-systems">Context-sensitive L-systems</h3>
<p>Unlike the 0L-systems in which production rules are applied
regardless of the context, context-sensitive L-systems, apply rules
depending on the context of the character evaluated, that is, its
predecessors and successors. This effect is useful in simulating
interactions between plant parts. We thus introduce production rules of
the form <span class="math inline">\(a_l &lt; a &gt; a_r \rightarrow
\chi\)</span>, where the rule <span class="math inline">\(a
\rightarrow \chi\)</span> is applied if and only if <span
class="math inline">\(a\)</span> is preceded by <span
class="math inline">\(a_l\)</span> and followed by <span
class="math inline">\(a_r\)</span>. This allows to <em>move</em>
characters (see example), and then introduce a sort of timer in the
process. Systems in which we consider only one side for the context are
denoted 1L-systems, and the one where we consider the two neighbors of a
character, as the following example, are called 2L-systems.</p>
<h4 id="example-from-shortened">Example (from <span class="citation"
data-cites="TheAB"></span>, shortened):</h4>
<p><span class="math display">\[\begin{aligned}
        \omega &amp; : baaa \\
        b&lt;a &amp; \rightarrow b\\
        a&lt;b&gt; \emptyset &amp; \rightarrow f\\
        b &amp; \rightarrow a \\
    \end{aligned}\]</span> The first generated sentences are given
below: <span class="math display">\[baaa \Rightarrow % \quad;\quad
        abaa \Rightarrow % \quad;\quad
        aaba \Rightarrow % \quad;\quad
        aaab \Rightarrow % \quad;\quad
        aaaf \quad\]</span></p>
<h4 id="note">Note:</h4>
<p>The priority of the rule application not is given by their order of
definition, but by the range of their context the broadest context is
given priority.</p>
<p>After the <span class="math inline">\(4^{th}\)</span> iteration, the
character <span class="math inline">\(f\)</span> appears at the end of
the sentence, meaning that if we associate <span
class="math inline">\(f\)</span> to the flower and <span
class="math inline">\(a\)</span> to the stem, then the flower appears
after four iterations at the top of the stem. It is easy, starting from
this example, to infer how one can use context-sensitive L-systems to
create flower-like models.</p>
<h1 class="unnumbered" id="open-problems---miscellaneous">Open problems
- Miscellaneous</h1>
<p>An interesting application of parametric context-sensitive L-systems
has been exposed by Hammel and Prusinkiewicz <span class="citation"
data-cites="diff-eq"></span>, is the use of those systems to express
numerical solutions to initial value problems for partial differential
equation.<br />
Every 0L-system <span class="math inline">\(G\)</span> defines an
obvious set of derivations <span class="math inline">\(E(G)\)</span>.
Those objects, the <em>0L sequence languages</em> have been studied in
<span class="citation" data-cites="ROZENBERG1980195"></span>.<br />
<strong>Open problem:</strong> Given two arbitrary OL-systems <span
class="math inline">\(G_1\)</span> and <span
class="math inline">\(G_2\)</span>, is it possible to decide whether
<span class="math inline">\(E(G_1) = E(G_2)\)</span>?<br />
R. Book conjectured that the answer to the above question is
positive.<br />
A locally contenative sequence is a sequence of words in which each word
can be constructed as the concatenation of previous words in the
sequence.<br />
<strong>Open problem:</strong> Is it decidable whether an arbitrary
DOL-system is locally contenative ?</p>
<p>The above problem constitutes today perhaps the most important open
problem concerning DOL systems.</p>
<h1 id="app:ldef">L-systems definitions</h1>
<h2 id="app:tri">Triangle</h2>
<p>Parameters: <span class="math display">\[\begin{aligned}
        l &amp; =10 \\
        \delta &amp; = 60 \\
    \end{aligned}\]</span> System: <span
class="math display">\[\begin{aligned}
        \omega &amp; : A \\
        \\
        B &amp; \rightarrow -A+B+A- \\
        A &amp; \rightarrow +B-A-B+ \\
    \end{aligned}\]</span></p>
<h2 id="app:fuzzy">Fuzzy tree</h2>
<p>Parameters: <span class="math display">\[\begin{aligned}
        l &amp; =10 \\
        \delta &amp; = 22 \\
    \end{aligned}\]</span> System: <span
class="math display">\[\begin{aligned}
        \omega &amp; : X \\
        \\
        F &amp; \rightarrow FF \\
        X &amp; \rightarrow F-[[X]+X]+F[+FX]-X \\
    \end{aligned}\]</span></p>
<h2 id="app:fuzzy">Randomized tree</h2>
<p>Parameters: <span class="math display">\[\begin{aligned}
        l &amp; =10 \\
        \delta &amp; = 15 \\
    \end{aligned}\]</span> System: <span
class="math display">\[\begin{aligned}
        \omega &amp; : X \\
        \\
        F &amp; \rightarrow FF \\
        X &amp; \rightarrow \begin{cases}
            F-[[XC]+XC]+[[XC]+XC]-X &amp; \text{w.p.} \frac{1}{4} \\
            F-[[XC]+XC]+[-FXC]+X &amp; \text{w.p.} \frac{1}{4} \\
            F[+XC][-XC]FX &amp; \text{w.p.} \frac{1}{4} \\
            F[+XC]F[-XC]+X &amp; \text{w.p.} \frac{1}{4} \\
        \end{cases}
    \end{aligned}\]</span></p>
</div>
</body>
</html>
